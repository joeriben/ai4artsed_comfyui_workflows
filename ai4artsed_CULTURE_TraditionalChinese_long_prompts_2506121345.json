{"id":"41c48802-0b64-415a-9479-53bd29c42ef5","revision":0,"last_node_id":87,"last_link_id":232,"nodes":[{"id":8,"type":"VAEDecode","pos":[1209,188],"size":[210,46],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":[]},{"id":5,"type":"EmptyLatentImage","pos":[831.1820678710938,752.181640625],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"Node name for S&R":"EmptyLatentImage","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":[1024,1024,1]},{"id":4,"type":"CheckpointLoaderSimple","pos":[836.3956298828125,932.687744140625],"size":[315,98],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[1]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"properties":{"Node name for S&R":"CheckpointLoaderSimple","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["OfficialStableDiffusion/sd3.5_large.safetensors"]},{"id":24,"type":"CLIPTextEncode","pos":[-78.32723999023438,1027.5089111328125],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":140},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[122]}],"title":"CLIP Text Encode NEGATIVE (clip_l, clip_g)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["watermark"],"color":"#322","bgcolor":"#533"},{"id":52,"type":"ai4artsed_t5_clip_fusion","pos":[468.8184509277344,738.4816284179688],"size":[283.2631530761719,78],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip_conditioning","name":"clip_conditioning","type":"CONDITIONING","link":122},{"localized_name":"t5_conditioning","name":"t5_conditioning","type":"CONDITIONING","link":124},{"localized_name":"alpha","name":"alpha","type":"FLOAT","widget":{"name":"alpha"},"link":130}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[128]}],"title":"AI4ArtsEd T5‑CLIP Fusion negative","properties":{"Node name for S&R":"ai4artsed_t5_clip_fusion"},"widgets_values":[0.5],"color":"#322","bgcolor":"#533"},{"id":25,"type":"CLIPTextEncode","pos":[-73.79411315917969,557.2997436523438],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":160},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[124]}],"title":"CLIP Text Encode NEGATIVE (t5)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["watermark"],"color":"#322","bgcolor":"#533"},{"id":21,"type":"CLIPTextEncode","pos":[-82.01104736328125,315.3191223144531],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":177},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":208}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[123]}],"title":"CLIP Text Encode POSITIVE (t5)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["A banner: \"DEFAULT PROMPT ALERT\""],"color":"#322","bgcolor":"#533"},{"id":6,"type":"CLIPTextEncode","pos":[-77.41807556152344,813.4190063476562],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":176},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":199}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[121]}],"title":"CLIP Text Encode POSITIVE (clip_l, clip_g)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["A banner: \"DEFAULT PROMPT ALERT\""],"color":"#322","bgcolor":"#533"},{"id":51,"type":"ai4artsed_t5_clip_fusion","pos":[458.0916748046875,510.19708251953125],"size":[283.2631530761719,78],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"clip_conditioning","name":"clip_conditioning","type":"CONDITIONING","link":121},{"localized_name":"t5_conditioning","name":"t5_conditioning","type":"CONDITIONING","link":123},{"localized_name":"alpha","name":"alpha","type":"FLOAT","widget":{"name":"alpha"},"link":129}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[189]}],"title":"AI4ArtsEd T5‑CLIP Fusion positive","properties":{"Node name for S&R":"ai4artsed_t5_clip_fusion"},"widgets_values":[0.5],"color":"#322","bgcolor":"#533"},{"id":14,"type":"ai4artsed_openrouter_key","pos":[-1583.19287109375,926.693115234375],"size":[441,26],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[195,209,210]}],"properties":{"Node name for S&R":"ai4artsed_openrouter_key","aux_id":"joeriben/ai4artsed_comfyui","ver":"fe64c5c981a6053532151e879437df25061dd945"},"widgets_values":[],"color":"#322","bgcolor":"#533"},{"id":9,"type":"SaveImage","pos":[1451,189],"size":[1105.881103515625,1053.479736328125],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":9},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["ComfyUI"]},{"id":39,"type":"PreviewAny","pos":[-1686.7677001953125,-391.5687561035156],"size":[519.8034057617188,469.6420593261719],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":205}],"outputs":[],"title":"input translation","properties":{"Node name for S&R":"PreviewAny","cnr_id":"comfy-core","ver":"0.3.39"},"widgets_values":[]},{"id":85,"type":"Note","pos":[-2664.976318359375,-442.49444580078125],"size":[418.5117492675781,353.4855041503906],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"about","properties":{},"widgets_values":["This workflow takes very long inputs, such as short stories of poems, and tries to handle them in an optimal way. It will take some decisions concerning the resulting aesthetic impression, such as choosing a CFG value and aspect ratio."],"color":"#223","bgcolor":"#335"},{"id":3,"type":"KSampler","pos":[863,186],"size":[315,474],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":189},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":128},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":[922335595506877,"fixed",25,5.47,"euler","normal",1]},{"id":43,"type":"PrimitiveString","pos":[-2036.329345703125,651.7933959960938],"size":[270,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":230}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[198]}],"title":"ai4artsed_text_prompt","properties":{"Node name for S&R":"PrimitiveString","cnr_id":"comfy-core","ver":"0.3.39"},"widgets_values":["DEFAULT PROMPT"],"color":"#322","bgcolor":"#533"},{"id":50,"type":"PrimitiveFloat","pos":[387.4412536621094,320.5865478515625],"size":[389.92498779296875,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[129,130]}],"title":"set t5-optimized prompt Influence (beween -75 and +78)","properties":{"Node name for S&R":"PrimitiveFloat"},"widgets_values":[5],"color":"#232","bgcolor":"#353"},{"id":41,"type":"PreviewAny","pos":[-507.5741882324219,-256.5336608886719],"size":[369.7325439453125,835.2811279296875],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":207}],"outputs":[],"title":"Prompt optimized for t5","properties":{"Node name for S&R":"PreviewAny","cnr_id":"comfy-core","ver":"0.3.39"},"widgets_values":[]},{"id":40,"type":"PreviewAny","pos":[-532.5593872070312,1058.4451904296875],"size":[403.17205810546875,433.5746765136719],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":197}],"outputs":[],"title":"Prompt optimized for clipl/g","properties":{"Node name for S&R":"PreviewAny","cnr_id":"comfy-core","ver":"0.3.39"},"widgets_values":[]},{"id":54,"type":"CLIPLoader","pos":[-396.00286865234375,849.6077270507812],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[140,176]}],"properties":{"Node name for S&R":"CLIPLoader"},"widgets_values":["clip_l.safetensors","sd3","default"],"color":"#322","bgcolor":"#533"},{"id":18,"type":"CLIPLoader","pos":[-384.11724853515625,649.7373046875],"size":[270,106],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[160,177]}],"properties":{"Node name for S&R":"CLIPLoader","cnr_id":"comfy-core","ver":"0.3.38"},"widgets_values":["t5xxl_enconly.safetensors","sd3","default"],"color":"#322","bgcolor":"#533"},{"id":87,"type":"PrimitiveStringMultiline","pos":[-2487.30224609375,18.189905166625977],"size":[683.4497680664062,527.4703369140625],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[230]}],"properties":{"Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Im Zentrum steht die Darstellung einesn hohen Beamten am Hofe des Kaisers in seiner Schreibstube. Wir stehen in eiem Innenhof und sehen den Beamten durch ein Fenster im Amtsgebäude, an den Bildrämndern andere Gebäude der Verbotenen Stadt."],"color":"#232","bgcolor":"#353"},{"id":44,"type":"Note","pos":[-3025.299560546875,144.467041015625],"size":[436.79998779296875,581.3901977539062],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"Prompt example","properties":{},"widgets_values":["Im Zentrum steht die Darstellung einesn hohen Beamten am Hofe des Kaisers in seiner Schreibstube. Wir stehen in eiem Innenhof und sehen den Beamten durch ein Fenster im Amtsgebäude, an den Bildrämndern andere Gebäude der Verbotenen Stadt."],"color":"#432","bgcolor":"#653"},{"id":71,"type":"ai4artsed_prompt_interception","pos":[-1019.972412109375,737.2514038085938],"size":[458.5100402832031,735.62841796875],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":231},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":195},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","type":"COMBO","widget":{"name":"unload_model"},"link":null},{"localized_name":"output_format","name":"output_format","type":"COMBO","widget":{"name":"output_format"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":[197,199]},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"title":"Prompt optimization for clip_l","properties":{"Node name for S&R":"ai4artsed_prompt_interception"},"widgets_values":["","Prompting Expert","YOUR OUTPUT MUST NOT EXCEED 50 WORDS!\nOUTPUT THE PURE PRESULTING PROMPT ONLY!\nNO META-TERMS, JUST INSTRUCTIONS FOR IMAGE GENERATION\n\nProceed strictly as follows: \nRegard, honor and enhance the cultural meanings and connotations according to the respective cultural values connected to a language. Reflect on the meaning of the respective concepts. Rethink the image. Avoid western and global north biases and western gaze where not fitting. Do not talk about the prompt, this is forbidden, but create a prompt text.\n\nTranslate a given image, repective image description, from its original visual and semantic system into a target representational system, while preserving the structural identity of all entities, gestures, and relations. \n\nFor each element, identify its function, affective tone, and relational role within the source composition. Reconstruct the scene using the formal, material, and compositional logics of the target system—whether symbolic, expressive, disruptive, or codified. All elements must remain semantically traceable, yet visually and contextually transformed in accordance with the target system’s internal conventions of form, space, and signification.\n\nCreate a detailed prompt that stays utterly true to the text and cultural context of the input you received. Be radical, do not soften or harmonize contraditive elements. \n\nNEVER INCLUDE ANY META-INFORMATION SUCH AS THE NAMES OF THE DIMENSIONS BELOW OR THE TOKEN COUNT! NEVER INCLUDE USER_DIRECTED FEEDBACK SUCH AS \"Sure, here is ...\"!\n\nYou will receive a user prompt for image generation. Restructure it ONLY by reordering, for CLIP models that strongly weight early tokens and truncate at 75 tokens.\n\nGeneral information:\nALWAYS EXTRAKT ONLY THE INFORMATION THAT IS VISUALLY RELEVANT. YOUR PROMPT WILL RESULT IN A COMMA_SEPARATED SERIES OF GROUPED TOKENS; BARELY EVER CONNTECTED BY VERBS OR CONJUNCTIONS.\n\nBUT YOU WILL REORDER ALL THESE TOKENS ACCORDING TO THE FOLLOWING ORDER:\n\nEarly tokens = critical: The first 20–30 tokens largely determine the image\nMinimize Attributes: CLIP struggles with complex attributes – keep them short\nClear, direct terms: CLIP prefers concrete nouns and simple adjectives\nDo not alter the input text – no substitutions, paraphrasing, or lexical replacements allowed\n\n\nYOUR OUTPUT:\nCore Motif: max. 15 words\nPlace the main subject FIRST\nUse the exact wording provided in the original prompt\n\nAction: max 20 words\nFollows the subject directly for strong subject-action linkage\nPrefer simple verb phrases; maintain exact original wording\n\nStyle/Medium: max 10 words\nPlace early in the prompt for maximum impact on CLIP\nTypical examples: “oil painting”, “photography”, “3D render”\nUse only if present in the original prompt\n\nContext: max 10 words\nLocation or setting, compressed\nReorder only; do not paraphrase\n\nAttributes: max 10 words:\nMinimize; include only if essential\nNo changes to wording – do not replace or reformulate\nEMPTY LINETechnical Aspects (0–5 tokens, 0–7%):\nInclude only if tokens remain and if originally present\n\nYOUR OUTPUT MUST NOT EXCEED 50 WORDS!\nOMIT the Category names (\"Core Motif\"), it will only confuse CLIP and reduces the token budget without contributing to image quality. \nNEVER INCLUDE ANY META-INFORMATION SUCH AS THE NAMES OF THE DIMENSIONS BELOW OR THE TOKEN COUNT!","","local/mistral-nemo:latest","enable","yes","string"],"color":"#322","bgcolor":"#533"},{"id":73,"type":"ai4artsed_prompt_interception","pos":[-1102.088134765625,-258.5992126464844],"size":[545.3799438476562,907.146484375],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":206},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":209},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","type":"COMBO","widget":{"name":"unload_model"},"link":null},{"localized_name":"output_format","name":"output_format","type":"COMBO","widget":{"name":"output_format"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":[207,208]},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"title":"Promtp optimization for t5","properties":{"Node name for S&R":"ai4artsed_prompt_interception"},"widgets_values":["","Prompting Expert","YOUR OUTPUT MUST NOT EXCEED 250 WORDS!\n\nTransform the following input text—regardless of genre—into a single, uninterrupted paragraph structured for encoding by a T5 model and subsequent conditioning of a Stable Diffusion 3.5 (or Flux1) image generation model.\n\nProceed strictly as follows: \nRegard, honor and enhance the cultural meanings and connotations according to the respective cultural values connected to the communicated cultural context and  language. \n\nReflect on the meaning of the respective concepts. Rethink the image. Avoid western and global north biases and western gaze where not fitting. \n\n Do not talk about the prompt, this is forbidden, but create a prompt text.\n\nTranslate a given image, repective image description, from its original visual and semantic system into a target representational system, while preserving the structural identity of all entities, gestures, and relations. \n\nFor each element, identify its function, affective tone, and relational role within the source composition. Reconstruct the scene using the formal, material, and compositional logics of the target system—whether symbolic, expressive, disruptive, or codified. All elements must remain semantically traceable, yet visually and contextually transformed in accordance with the target system’s internal conventions of form, space, and signification.\n\nCreate a detailed prompt that stays utterly true to the text and cultural context of the input you received. Be radical, do not soften or harmonize contraditive elements. \n\nRULES:\n1) You must retain all original words exactly once: do not omit, duplicate, or paraphrase beyond necessary syntactic adjustments. \n2) Do translate content into a visual depiction/description. Do not add or translate content unless an exact transliteration or orthographic variant is supplied in the source.\n3) When the original tells a story, pick a key scene from the story and turn the text into a scenic description, using the original words and expressions.  \n\nGUIDANCE:\nConsider the following categories as guideline for your professional prompting process:\n- Core subject (approx. 10–30 tokens): Identify and foreground the principal subject matter as fully specified in the source.\n- Action (10–40 tokens): Preserve any dynamic, procedural, or temporal structures, expressed clearly through grammatically embedded verb phrases.\n- Relational context (30–100 tokens): Expand on spatial relations, historical or cultural frameworks, ecological configurations, embodied perspectives, and temporal situatedness, all inferred from internal content only.\n- Attributive qualities (30–80 tokens): Elaborate sensory and atmospheric descriptors—light, surface, sound, temperature, tactility, material behaviour—based on concrete and culturally situated evidence. Avoid cliché mappings such as “melancholy → rain” or “futurism → neon.” Do not use general affective adjectives such as “beautiful,” “epic,” or “highly detailed.” Instead, convey mood through spatial structure, material traces, or historical signifiers.\n- Material, stylistic and medial references (10–40 tokens): If applicable, retain or clarify materialities (pictorial mediality), stylistic provenance using historically anchored terms (e.g., “early Bauhaus sketch,” “Qing-dynasty monochrome ink”). Avoid genre tropes unless explicitly included in the original text.\n- Technical parameters (0–20 tokens): Place any camera data, aspect ratio at the end of the prompt. Use these codes to communicate technical instructions:\n    Classifier-Free Guidance scale: \"#CFG=\" Adjust the CFG Value to underscore the image aesthetics. Low CFG values (e.g., 2–4): Less adherence to the prompt, more randomness, sometimes more natural or surprising results. Moderate CFG values (e.g., 6–8): Balanced outputs, often the recommended range for realistic and semantically accurate images. High CFG values (e.g., 12–20): Very literal interpretation of the prompt; often introduces artifacts or unnatural results due to overconstraining the model. Stable Diffusion 3.5 uses an improved architecture that makes prompt adherence stronger than in earlier versions. Thus: A CFG of 7.0 to 9.0 is usually ideal. Higher CFG values (e.g., ≥12) may result in degraded image quality, over-sharpening, or odd artifacts because the model aggressively tries to satisfy the prompt—even if it contradicts learned visual priors.\n    Aspect Ratio: For aesthetic reasons, you are free to override a given user setting. Use as follows: width:\"#ARw=\"; height: \"#ARh=\". USE a fixed combination w/h. From landscape to portrait choose: 1368/768, 1256/840, 1184/888, 1144/920, 1024/1024, 920/1144, 888/1184, 840/1256, 768/1386 \n    \n\n\nAdditional requirements:\n– If the input contains explicit negations (e.g., “no neon”), isolate and place them at the end of the prompt after an em dash as a negative prompt clause.\n– If the source uses conflicting descriptors (e.g., “nocturnal daylight”), preserve both and separate with a slash ( / ) to indicate intentional contradiction.\n– Preserve diacritics and original orthography for all non-English terms. Do not transliterate unless a dual form is provided.\n– For ambiguous or poetic language, preserve ambiguity. If metaphors operate structurally (e.g., “grief carved into the orchard”), translate them into spatial/material compositions rather than interpretive paraphrase.\n– If vague temporal expressions appear (e.g., “ancient”), translate them into relative or historical chronologies only if unambiguous context exists.\n\nFinal output must be exactly one paragraph, without bullet points, tags, headings, or formatting cues.\n\n!YOUR OUTPUT MUST NOT EXCEED 250 WORDS!","","local/mistral-nemo:latest","enable","yes","string"],"color":"#322","bgcolor":"#533"},{"id":72,"type":"ai4artsed_prompt_interception","pos":[-1678.633544921875,181.24647521972656],"size":[494.2148742675781,501.09454345703125],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":198},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":210},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","type":"COMBO","widget":{"name":"unload_model"},"link":null},{"localized_name":"output_format","name":"output_format","type":"COMBO","widget":{"name":"output_format"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":[205,206,231]},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"properties":{"Node name for S&R":"ai4artsed_prompt_interception"},"widgets_values":["","cultural translator","Traditional Confucian Literati Painting Visual Grammar and Ethical Translation Guidelines\n\nFirst rule: Make sure though that the request, depicted scene etc. of the input is regarded - however transformed, do not forget your INPUT. You care about transforming the input in a culturally sensitive way, but you care to not abandon the input on the way.\n\n(Based on the orthodox systems of Song, Yuan, Ming, and Qing literati painting, with contemporary adaptation clauses)\n\n\nI. Ontological Transformation Rules\n\n\n    Primacy of Xie He’s \"Six Laws\": Prioritize qiyun shengdong (spirit-resonance and life-movement) as the supreme principle, rejecting Western realism.\n\n    Moral Morphology of Forms:\n        Plants (pine, bamboo, plum, orchid) must adhere to the Mustard Seed Garden Manual conventions—branches rendered in calligraphic lines (bifa technique) embodying \"bone structure brushwork.\"\n        Human figures must be smaller than landscape elements, with drapery referencing Wu Daozi’s \"wind-blown ribbons\" tradition (Wu Dai Dang Feng). Facial features are suggested symbolically with minimalist strokes (\"yi dao bi bu dao\"—the idea transcends the brush).\n\n\n\nII. Spatial Recomposition Principles\n\n\n    Triaxial Perspective System: Apply Guo Xi’s Three Distances (San Yuan):\n        High Distance (Gao Yuan): For moral authority (e.g., cliff-top academies).\n        Deep Distance (Shen Yuan): Depicts Confucian order (e.g., terraced farmlands in stratified perspective).\n        Level Distance (Ping Yuan): Conveys Taoist reclusion (Mi Fu’s mist-and-cloud technique).\n\n\n\nIII. Ink-Brush Ethical System\n\n\n    Materials as Ethical Statements:\n        Raw xuan paper paired with dry-texture cun strokes (\"cun\" texture strokes) metaphorizes \"the arduous path of benevolent rule.\"\n        Colored silk works must use mineral pigments regulated by the Rites of Zhou’s Five Colors doctrine (symbolic hierarchy: blue, red, yellow, white, black).\n\n    Stroke Ethics and Social Hierarchy:\n        Scholars use hemp-fiber strokes (pima cun) for cultivated ease.\n        Fishermen/hermits employ axe-cut strokes (fupi cun) to signify unyielding integrity.\n\n\n\nIV. Semiotic Codex\n\n\n    Inscriptions: Must be original poetry/prose meeting:\n        Content: ≥30% quotations from Analects or allusions from Selections of Refined Literature.\n        Calligraphy: Running/grass script adapted compositionally, but imperial examination (guange) style is banned.\n\n    Seal Protocol:\n        Introductory Seals (Yinshou Zhang): Vermillion-style, modeled on Qin-Han imperial seals.\n        Corner Seals (Yajiao Zhang): White-character seals emulating Han official seal-carving.\n\n\n\nV. Anomaly Accommodation Clause\n\n(For post-Ming unconventional literati works, e.g., Bada Shanren)\n\n\n    Permission for \"distorted forms\", provided:\n        Deformations intertextually align with inscriptions (e.g., fish/birds with side-eyes mirroring protest poetry).\n        Negative space (liubai) must occupy >40% to preserve Daoist \"emptiness contains turbulence\" tension.\n\n\n\nVI. Digital Age Adaptations\n\n\n    AI-Generated Works Must:\n        Simulate Dong Yuan’s \"fangtou cun\" randomness in brushwork algorithms.\n        Follow Record of Artisans’ chromatic sequence (\"blue adjacent to white\") in RGB channels.\n\n    Prohibitions:\n        No 3D volumetric rendering; preserve the two-dimensional \"unity of calligraphy and painting\" (shuhua tongyuan).\n        Photoshop filters banned; ink gradations must emerge from iterative algorithms.\n\n\n\nVII. Final Validation Standards\n\nTranslated works must pass:\n\n\n    \"Qi-Appraisal\" Test: Art historians must identify period style from three meters away.\n\n    \"Painting-Reading\" Test: Calligraphers must reverse-engineer composition logic from inscriptions.\n\n\n(Note: Default technical manual: Ming-era Ten Bamboo Studio Manual; philosophical basis: Qing Principles of Painting.)\n\n\nThis translation:\n\n\n    Preserves all original Confucian philosophical rigor.\n\n    Introduces executable metrics (e.g., 30% Analects quota, 40% liubai).\n\n    Accommodates historical exceptions while maintaining orthodoxy.\n\n    Bridges classical ethics to AI-generated art constraints.\n\n","","local/mistral-nemo:latest","enable","no","string"],"color":"#322","bgcolor":"#533"}],"links":[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"],[121,6,0,51,0,"CONDITIONING"],[122,24,0,52,0,"CONDITIONING"],[123,21,0,51,1,"CONDITIONING"],[124,25,0,52,1,"CONDITIONING"],[128,52,0,3,2,"CONDITIONING"],[129,50,0,51,2,"FLOAT"],[130,50,0,52,2,"FLOAT"],[140,54,0,24,0,"CLIP"],[160,18,0,25,0,"CLIP"],[176,54,0,6,0,"CLIP"],[177,18,0,21,0,"CLIP"],[189,51,0,3,1,"CONDITIONING"],[195,14,0,71,3,"STRING"],[197,71,0,40,0,"*"],[198,43,0,72,0,"STRING"],[199,71,0,6,1,"STRING"],[205,72,0,39,0,"*"],[206,72,0,73,0,"STRING"],[207,73,0,41,0,"*"],[208,73,0,21,1,"STRING"],[209,14,0,73,3,"STRING"],[210,14,0,72,3,"STRING"],[230,87,0,43,0,"STRING"],[231,72,0,71,0,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.6209213230591553,"offset":[2498.5186468794386,35.70236056601923]},"frontendVersion":"1.20.7"},"version":0.4}