{"id":"51774992-2cc6-467d-b81d-cbed57895b7f","revision":0,"last_node_id":59,"last_link_id":89,"nodes":[{"id":5,"type":"EmptyLatentImage","pos":[1845.0916748046875,886.107421875],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"EmptyLatentImage"},"widgets_values":[1024,1024,1]},{"id":8,"type":"VAEDecode","pos":[1511.0772705078125,901.7804565429688],"size":[210,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":7,"type":"CLIPTextEncode","pos":[1382.3824462890625,1219.0897216796875],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":5}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[6]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":6,"type":"CLIPTextEncode","pos":[1382.6529541015625,1001.113525390625],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":3},{"name":"text","type":"STRING","widget":{"name":"text"},"link":84}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[4]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CLIPTextEncode"},"widgets_values":["beautiful scenery nature glass bottle landscape, , purple galaxy bottle,"]},{"id":3,"type":"KSampler","pos":[1856.083740234375,1077.40966796875],"size":[352.9214782714844,262],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":4},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"KSampler"},"widgets_values":[51760760014995,"randomize",25,1,"euler","normal",1]},{"id":31,"type":"BetterString","pos":[-210.6964874267578,-179.2086181640625],"size":[319.52459716796875,328.86065673828125],"flags":{},"order":1,"mode":0,"inputs":[{"name":"chain","shape":7,"type":"STRING","widget":{"name":"chain"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[]}],"title":"Input your prompt here","properties":{"cnr_id":"comfyui-better-strings","ver":"1.0.0","Node name for S&R":"BetterString"},"widgets_values":["",""],"color":"#232","bgcolor":"#353"},{"id":38,"type":"Note","pos":[-538.5821533203125,-303.7875061035156],"size":[302.9134216308594,265.2767639160156],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Note: USE Prompts OR Image Inputs","properties":{},"widgets_values":["Use either a text prompt or load an image.\n\nMake sure to connect e\n- ither the \"STRING\" output of the prompt module\nor\n- the \"description\" output of tha \"Ollama Vision\" module\nto the \"input_prompt\" connector of the \"AI4ArtsEd Ollama Prompt: Cultural Translation\" Module.\n\nYou may alter the prompt (meta-) instruction in the \"AI4ARtsEd\" Nodes – however, if you do so, please do not save your workflow, but \"save as\" and choose a different name."],"color":"#323","bgcolor":"#535"},{"id":58,"type":"ShowText","pos":[204.7377166748047,-1054.3167724609375],"size":[299.37109375,112],"flags":{},"order":9,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":88}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","Retell this as a Sámi joik song from northern Europe."]},{"id":47,"type":"ai4artsed_random_artform_generator","pos":[389.9005432128906,-704.0280151367188],"size":[201.60000610351562,86],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"localized_name":"artform_1","name":"artform_1","type":"STRING","links":[71,76,86]},{"localized_name":"artform_2","name":"artform_2","type":"STRING","links":[87]},{"localized_name":"artform_3","name":"artform_3","type":"STRING","links":[88]},{"localized_name":"artform_4","name":"artform_4","type":"STRING","links":[89]}],"properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"8cd50970ed61f98b44e602fe6de62d803269491c","Node name for S&R":"ai4artsed_random_artform_generator"},"widgets_values":[],"color":"#322","bgcolor":"#533"},{"id":51,"type":"ShowText","pos":[646.7501831054688,-723.1118774414062],"size":[299.37109375,112],"flags":{},"order":7,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":76}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","Write this in the spirit of German Expressionist cinema."]},{"id":28,"type":"PrimitiveString","pos":[-651.2102661132812,398.4376525878906],"size":[356.5572509765625,67.83585357666016],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[]}],"title":"Provide a context: neutral","properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PrimitiveString"},"widgets_values":[" 1000 characters maximum output length!"],"color":"#232","bgcolor":"#353"},{"id":4,"type":"CheckpointLoaderSimple","pos":[837.3129272460938,985.4434814453125],"size":[375.6984558105469,105.4643325805664],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[1]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[3,5]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"title":"Choose your model (or leave the preset)","properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd3.5_large_fp8_scaled.safetensors"],"color":"#232","bgcolor":"#353"},{"id":9,"type":"SaveImage","pos":[1177.6282958984375,-538.3463745117188],"size":[747.5185546875,852.1698608398438],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":9}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27"},"widgets_values":["ComfyUI",""]},{"id":53,"type":"ShowText","pos":[666.0299682617188,71.66947174072266],"size":[482.5594482421875,272.5113220214844],"flags":{},"order":17,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":78}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","German Expressionist film still, 1920s movie, extreme chiaroscuro, jagged houses, stark red, spectral white, distorted Dutch angles, looming over ink-black water, skeletal warped boats, splintered docks, sharp teeth-like fence, prison bar shadows, empty chairs askew, unsettling angles, low oppressive painted sky, swirling dark patterns, stark highlights, cavernous elongated shadows, fractured composition, claustrophobic framing, nightmarish dread."]},{"id":59,"type":"ShowText","pos":[536.7534790039062,-1049.316162109375],"size":[299.37109375,112],"flags":{},"order":10,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":89}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","Reframe this message through the movements of a whirling dervish."]},{"id":57,"type":"ShowText","pos":[-150.2506866455078,-1053.9117431640625],"size":[299.37109375,112],"flags":{},"order":8,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":87}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","Turn this into an Inuit bone carving narrative."]},{"id":52,"type":"ShowText","pos":[662.7841796875,-247.45538330078125],"size":[486.0854187011719,259.9419250488281],"flags":{},"order":16,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":77}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","Jagged houses, painted in stark, unnerving red and spectral white, loom at distorted angles over ink-black, menacing water. Their forms lean precariously, casting deep, elongated shadows that slice across the scene. Skeletal boats, warped apparitions, float untethered upon the oppressive surface, while others are bound by thick, heavy ropes to docks resembling splintered bone. A fence of sharp, teeth-like pickets, unnaturally white, imprisons the sterile white house, its shadow falling like prison bars. Near the garish red edifice, empty chairs sit askew, their angles sharp and unsettling, hinting at unseen anxieties. Above, a low, oppressive sky, perhaps a painted backdrop slashed with artificial light or swirling with dark, tormented patterns, presses down upon the tilted structures. The masts of derelict sailboats rise like sharp accusations into this gloom. The entire composition is fractured by extreme chiaroscuro—stark highlights glare against cavernous shadows, creating a nightmarish landscape of psychological dread and suffocating unease."]},{"id":56,"type":"ShowText","pos":[666.8469848632812,-530.8751220703125],"size":[471.97589111328125,223.5646514892578],"flags":{},"order":14,"mode":0,"inputs":[{"name":"text","type":"STRING","widget":{"name":"text"},"link":83}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-show-text","ver":"1.0.2","Node name for S&R":"ShowText"},"widgets_values":["","First Table: Visually Observable Entities and Relationships\n| Entity 1     | Relation   | Entity 2     | Relation Type |\n|--------------|------------|--------------|---------------|\n| Houses       | next to    | Water        | spatial       |\n| Boats        | on         | Water        | spatial       |\n| Red House    | next to    | White House  | spatial       |\n| White Fence  | surrounds  | White House  | spatial       |\n| Chairs       | next to    | Red House    | spatial       |\n| Boats        | tied to    | Docks        | spatial       |\n| Sky          | above      | Houses       | spatial       |\n| Sailboats    | has        | Masts        | property      |\n| Houses       | has color  | Red/White    | property      |\n\nSecond Table: Inferred or Interpretative Semantic Relations\n| Subject      | Inferred Relation | Object / Value  | Type         | Source              |\n|--------------|-------------------|-----------------|--------------|---------------------|\n| Scene        | suggests          | Tranquility     | emotional    | visual cue          |\n| Architecture | indicates         | Scandinavian    | symbolic     | cultural trope      |\n| Boats        | imply             | Leisure         | social       | contextual inference|\n| White Fence  | connotes          | Privacy         | symbolic     | cultural trope      |\n| Weather      | suggests          | Summer          | environmental| visual cue          |"]},{"id":43,"type":"ai4artsed_openrouter","pos":[143.7896270751953,73.99614715576172],"size":[491.4000244140625,268],"flags":{},"order":15,"mode":0,"inputs":[{"name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":63},{"name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":86}],"outputs":[{"localized_name":"output","name":"output","type":"STRING","links":[78,84]}],"properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"c18287f8f0f79fa978069f0bceb2b248a507b870","Node name for S&R":"ai4artsed_openrouter"},"widgets_values":["","","Use the input to create a prompt suitable for Stable Diffusion 3.5.\nInstructions:\n1. Select only information that can be rendered visually: entities, their visual properties, spatial configurations, symbolic or narrative roles if they have visual consequences (e.g. pose, gesture, setting, costume).\n2. Ignore non-visual symbolic or abstract relations unless they manifest as visible differences (e.g. \"freedom\" → \"confinement\" becomes \"open field\" → \"prison room\").\n3. Condense the result into a comma-separated prompt with no more than 75 tokens. Use compressed, stylized language typical for SD prompts.\n4. Do not use full sentences. Avoid repetition. Do not include any meta-text or explanation. But: be very clear about the media/genre, e.g. if it is a movie still (and if, which technology, black&white, 1940 colors, digital film etc.), an oil painting, a particular antique technique, etc.\n5. Emphasize key compositional and stylistic features if evident (e.g. centered, dramatic lighting, overcast, wide angle, cinematic).\nOutput: Only the resulting prompt as plain text. No table, no explanation, no formatting.\nIf the resulting prompt is clearly under 175 tokens, expand it by:\n– adding visually descriptive adjectives (e.g. lighting, texture, motion, color quality)\n– specifying environmental or background elements that imply the mood\n– including camera or compositional hints (e.g. angle, framing, focus)\n– inserting emotional or symbolic indicators only if they have visual impact\nDo not pad artificially or repeat. Prioritize meaningful, image-relevant details.","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","google/gemini-2.5-pro-preview-03-25","enable"],"color":"#322","bgcolor":"#533"},{"id":45,"type":"ai4artsed_openrouter_imageanalysis","pos":[144.306396484375,-537.8350219726562],"size":[471.9098205566406,223.86563110351562],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":68}],"outputs":[{"localized_name":"response","name":"response","type":"STRING","links":[69,83]}],"properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"a340068a05ea7719f076ca180fd5959982681133","Node name for S&R":"ai4artsed_openrouter_imageanalysis"},"widgets_values":["Analyze the image and output exactly two separate tables. Do not include any introductory or explanatory text beyond these tables.\nFirst Table: Visually Observable Entities and Relationships\nFormat:\n| Entity 1 | Relation | Entity 2 | Relation Type |\nInstructions:\n1. Identify all visible or implied entities (people, objects, animals, symbols, elements of the environment, etc.).\n2. For each pair of entities, specify a concrete relation that connects them using clear, unambiguous terms (e.g., \"above\", \"next to\", \"inside\", \"wearing\", \"has color\").\n3. Classify each relation into one of the following types:\n- spatial (e.g., above, next to, inside)\n- temporal (e.g., before, after, simultaneous)\n- causal (e.g., causes, enables, prevents)\n- symbolic (e.g., represents, connotes, expresses)\n- narrative (e.g., protagonist of, is acted upon by, interacts with)\n- social (e.g., mother of, enemy of, supports)\n- property (e.g., has color, has gender, has age, shows emotion)\nSecond Table: Inferred or Interpretative Semantic Relations\nFormat:\n| Subject | Inferred Relation | Object / Value | Type | Source |\nInstructions:\n1. Extract higher-level, inferred semantic relations based on visual cues and contextual hints. These relations can include aesthetic and artistic context, genre-specific traits, historical context, emotional states, narrative context, symbolic meanings, social dynamics, environmental impressions, temporal cues, or attentional focus.\n2. For each inference, specify the relation clearly and classify it using one of the following types: emotional, narrative, symbolic, social, environmental, temporal, attentional, or other.\n3. In the “Source” column, indicate the origin of the inference (e.g., \"visual cue\", \"contextual inference\", \"cultural trope\", \"associative logic\").\n4. Use one row per relation.\nOutput only the two markdown tables in the specified format.","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","openai/gpt-4o",1024,0.7],"color":"#322","bgcolor":"#533"},{"id":42,"type":"ai4artsed_openrouter","pos":[138.71713256835938,-256.72003173828125],"size":[491.4000244140625,268],"flags":{},"order":13,"mode":0,"inputs":[{"name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":69},{"name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":71}],"outputs":[{"localized_name":"output","name":"output","type":"STRING","links":[63,77]}],"properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"c18287f8f0f79fa978069f0bceb2b248a507b870","Node name for S&R":"ai4artsed_openrouter"},"widgets_values":["","","Transform the image description according to the logic and instructions defined in the input labeled “input_context”.\nThis is not a linguistic translation, but a aesthetic, semantic and structural transformation.\nReconstruct all entities and their relations as specified, ensuring that:\n- Each entity is retained – or respectively transformed – as instructed. There is, though, no reason to turn every animal of being into a \"creature\".\n- Each relation is altered in line with the particular aesthetics, genre-typical traits, and logic of the “Context”. Be explicit about visual aesthetics in terms of materials, techniques, composition, and overall atmosphere.\nDo not explain your reasoning.\nOutput only the transformed description as plain descriptive text.","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","google/gemini-2.5-pro-preview-03-25","enable"],"color":"#322","bgcolor":"#533"},{"id":29,"type":"LoadImage","pos":[-206.33218383789062,-549.3392333984375],"size":[315,314],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[68]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoadImage"},"widgets_values":["_1055457.jpeg","image",""],"color":"#232","bgcolor":"#353"}],"links":[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[3,4,1,6,0,"CLIP"],[4,6,0,3,1,"CONDITIONING"],[5,4,1,7,0,"CLIP"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"],[63,42,0,43,0,"STRING"],[68,29,0,45,0,"IMAGE"],[69,45,0,42,0,"STRING"],[71,47,0,42,2,"STRING"],[76,47,0,51,0,"STRING"],[77,42,0,52,0,"STRING"],[78,43,0,53,0,"STRING"],[83,45,0,56,0,"STRING"],[84,43,0,6,1,"STRING"],[86,47,0,43,1,"STRING"],[87,47,1,57,0,"STRING"],[88,47,2,58,0,"STRING"],[89,47,3,59,0,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.7400249944258179,"offset":[256.0815792742535,816.000350208435]},"linkExtensions":[{"id":19,"parentId":1}]},"version":0.4}