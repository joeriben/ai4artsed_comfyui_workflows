{"id":"50c1fd63-37c5-4873-84c8-5b6c8411ce3d","revision":0,"last_node_id":51,"last_link_id":75,"nodes":[{"id":20,"type":"CLIPLoader","pos":[3711.84375,547.2083740234375],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":null}],"properties":{"Node name for S&R":"CLIPLoader","cnr_id":"comfy-core","ver":"0.3.36"},"widgets_values":["clip_g.safetensors","stable_diffusion","default"]},{"id":11,"type":"ai4artsed_openrouter_key","pos":[-1479.5887451171875,113.46794891357422],"size":[441,26],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[51]}],"properties":{"Node name for S&R":"ai4artsed_openrouter_key","aux_id":"joeriben/ai4artsed_comfyui","ver":"e511931edb551d65374c44689e76c08794ed31e7"},"widgets_values":[],"color":"#322","bgcolor":"#533"},{"id":6,"type":"CLIPTextEncode","pos":[-528.9072875976562,-510.7071838378906],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":64},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":74}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[4]}],"properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["A banner showing DEFAULT PROMPT, EINGABE FEHLGESCHLAGEN"],"color":"#322","bgcolor":"#533"},{"id":7,"type":"CLIPTextEncode","pos":[-526.7420654296875,-292.95465087890625],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":65},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[6]}],"properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["text, watermark"],"color":"#322","bgcolor":"#533"},{"id":9,"type":"SaveImage","pos":[283.7371520996094,-659.4732055664062],"size":[626.985595703125,683.2880249023438],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":9},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["ComfyUI"]},{"id":5,"type":"EmptyLatentImage","pos":[-409.9225769042969,-73.06407165527344],"size":[315,106],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"Node name for S&R":"EmptyLatentImage","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":[1024,1024,1],"color":"#322","bgcolor":"#533"},{"id":40,"type":"Note","pos":[-1685.28466796875,-1101.7706298828125],"size":[677.2032470703125,249.54833984375],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"How to use this template","properties":{},"widgets_values":["Nach dem Öffnen direkt im Menü am unteren Bildrand: \"Workflow -> Save as\"\nspeichern als \n\nDeinSelbstgewähltesKürzel_WORKFLOW-NAME_timecode  (timecode = JahrMonatTagStundeMinute, z.B. 2506100949)\n\nz.B. BenJoe_SCHERENSCHNITT_2506100953\n\nNeue Versionen: einfach \"Save as\" und den timecode anpassen.\n\nDas originale Template sicherheitshalber schließen (untere Bildrand, Reiter -> X - Zeichen). Alle unsere Workflows sind gesichert; Ihr könnt also nicht wichtiges löschen! ;-)\n\nWenn Euer Workflow im \"Werkraum\" eingestellt werden soll, gebt uns bitte Bescheid!\n"],"color":"#432","bgcolor":"#653"},{"id":45,"type":"PreviewAny","pos":[2161.529052734375,-729.7205200195312],"size":[475.4119873046875,232.17066955566406],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":73}],"outputs":[],"title":"final sound/music Prompt","properties":{"Node name for S&R":"PreviewAny"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":4,"type":"CheckpointLoaderSimple","pos":[-525.7796020507812,-664.1536254882812],"size":[417.40997314453125,102.49164581298828],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[1]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"title":"Choose your checkpoint ( = image generation model)","properties":{"Node name for S&R":"CheckpointLoaderSimple","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["OfficialStableDiffusion/sd3.5_large.safetensors"],"color":"#232","bgcolor":"#353"},{"id":46,"type":"TripleCLIPLoader","pos":[-52.37008285522461,-660.3831176757812],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"clip_name3","name":"clip_name3","type":"COMBO","widget":{"name":"clip_name3"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[64,65]}],"properties":{"Node name for S&R":"TripleCLIPLoader"},"widgets_values":["clip_l.safetensors","clip_g.safetensors","t5xxl_enconly.safetensors"],"color":"#322","bgcolor":"#533"},{"id":43,"type":"Musicgen_","pos":[2178.75244140625,-434.2854919433594],"size":[400,208],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":72},{"localized_name":"seconds","name":"seconds","type":"FLOAT","widget":{"name":"seconds"},"link":null},{"localized_name":"guidance_scale","name":"guidance_scale","type":"FLOAT","widget":{"name":"guidance_scale"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","links":[59]}],"properties":{"Node name for S&R":"Musicgen_"},"widgets_values":["a sophisticated progressive rock song, hightest quality, professional mix",30,4,2129966629,"randomize","auto"],"color":"#223","bgcolor":"#335"},{"id":3,"type":"KSampler","pos":[-51.679141998291016,-500.7956848144531],"size":[267.44036865234375,474],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":4},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":[788107060766093,"randomize",25,5.5,"euler","normal",1],"color":"#322","bgcolor":"#533"},{"id":50,"type":"ai4artsed_image_analysis","pos":[1294.773681640625,-1102.23046875],"size":[400,250],"flags":{"collapsed":true},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"system_prompt","name":"system_prompt","shape":7,"type":"STRING","widget":{"name":"system_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","shape":7,"type":"STRING","widget":{"name":"api_key"},"link":null},{"localized_name":"debug","name":"debug","shape":7,"type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","shape":7,"type":"COMBO","widget":{"name":"unload_model"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":null},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"properties":{"Node name for S&R":"ai4artsed_image_analysis"},"widgets_values":["","local/llava:13b","","","disable","no"]},{"id":49,"type":"ai4artsed_openrouter_key","pos":[1054.58349609375,-773.4100952148438],"size":[284.82501220703125,26],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[69]}],"properties":{"Node name for S&R":"ai4artsed_openrouter_key"},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[-24.74503517150879,-19.377962112426758],"size":[210,46],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9,66]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":[],"color":"#322","bgcolor":"#533"},{"id":48,"type":"PreviewAny","pos":[1011.0559692382812,-344.5777893066406],"size":[385.96881103515625,449.8335876464844],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":68}],"outputs":[],"title":"Image Analysis","properties":{"Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":42,"type":"AudioPlay","pos":[2718.046875,-686.3823852539062],"size":[210,280],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":59}],"outputs":[],"properties":{"Node name for S&R":"AudioPlay"},"widgets_values":[["/ComfyBackendDirect/api/view?filename=music_gen_00050.wav&type=output&subfolder=&rand=0.0442551923184048","A medieval-inspired soundtrack with a mix of choral music, lively dances, and period instruments. The piece opens with soft, atmospheric chanting, then transitions to a playful and upbeat dance melody. The setting sun adds a warm, golden glow, while the Gothic church's pointed arches and flying buttresses create an ethereal backdrop for the festive event in the foreground."]],"color":"#223","bgcolor":"#335"},{"id":37,"type":"PrimitiveStringMultiline","pos":[-1477.517333984375,-771.42138671875],"size":[806.9450073242188,211.6782989501953],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[56]}],"title":"Just a more convenient input for your prompt","properties":{"Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Ein Glockenturm läutet das große Stadtfest ein."],"color":"#232","bgcolor":"#353"},{"id":34,"type":"ai4artsed_prompt_interception","pos":[-1488.2978515625,-324.0515441894531],"size":[400,376],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":null},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":51},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","type":"COMBO","widget":{"name":"unload_model"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":[53]},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"title":"AI4ArtsEd Translation_english","properties":{"Node name for S&R":"ai4artsed_prompt_interception"},"widgets_values":["","professional translator","Translate the prompt into English with maximal semantic preservation. \nMaintain the original structure, and preserve all culturally specific terms or non-translatable phrases in their original form. \nDo not translate proper names, ritual terms, or material names unless they have a common English usage. \nMark such terms with double brackets, e.g. [[egungun]], and preserve their position. \nDo not paraphrase, interpret, or summarize. Do not add any comments or explanations.\nReturn only the translated prompt as plain text.","","local/mistral:7b","enable","yes"],"color":"#322","bgcolor":"#533"},{"id":33,"type":"PreviewAny","pos":[-1077.8951416015625,-324.9759521484375],"size":[419.2315673828125,362.6350402832031],"flags":{},"order":12,"mode":4,"inputs":[{"localized_name":"source","name":"source","type":"*","link":53}],"outputs":[],"title":"input translation","properties":{"Node name for S&R":"PreviewAny","cnr_id":"comfy-core","ver":"0.3.39"},"widgets_values":[]},{"id":26,"type":"PrimitiveString","pos":[-1467.6138916015625,-517.2675170898438],"size":[826.6832275390625,109.9383544921875],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":56}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[74,75]}],"title":"ai4artsed_text_prompt","properties":{"Node name for S&R":"PrimitiveString","cnr_id":"comfy-core","ver":"0.3.36"},"widgets_values":["Ein Banner mit der Aufschrift ACHTUNG DEFAULT-PROMPT!"],"color":"#322","bgcolor":"#533"},{"id":44,"type":"ai4artsed_prompt_interception","pos":[1566.2166748046875,-728.8158569335938],"size":[559.719970703125,759.2860717773438],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","widget":{"name":"input_prompt"},"link":75},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","type":"COMBO","widget":{"name":"unload_model"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":[72,73]},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"properties":{"Node name for S&R":"ai4artsed_prompt_interception"},"widgets_values":["","synaesthetic expert","transform this image desription into a description for sound and/or music. How would it sound like? Would msic or rather a soundscape fit ths description? If the description were an image, which sound/music wuld accompany it? Your output will be a pure sound/musical description for Music Gen.\n\nDO NOT TELL STORIES. NEVER TELL STORIES. DESCRIBE CONCRETE AUDITIVE PROPERTIES IN DETAIL.\n\nInfer from context, e.g. pick up on references to nature, to work, to interaction and find according sound/scapes) or music (pieces, genres). Pick up on emotional subtext of the prompt (i.e. conduct an emotional analysis). Pick up on spatial context (e.g. causing echos or reverb).\n\nIf the imput is concrete and bears soud-related element (such as bells), you WILL USE THOSE. \n\nRULE: If the input is concrete and direct, your sonic translation will stay true and WILL NOT be an abstraction. If the input is rather abstract, so will your sonic translation be.\n\nKeep it short, not more that 50 words! Do not descripbe what the AI should achieve,. Instead descripbe the sound, music (Genre), structures, and temporal flow in detail.\n\nDo not be esoteric, the musig gen engine will not understand this. Be very concrete and explicit as to what it should do.\n\nThe sound/music gen is very rough. Avoid anything the would easily rip up such as high tones, metallic tones, even wind howling, intermittend bird chirps adn calls (won't sound as good as you think). Prefer clear tones and structures.\n\nThe sound wil only be 30 seconds. Make sure it has an ending or fade-out.","","local/llava:13b","disable","yes"],"color":"#223","bgcolor":"#335"},{"id":47,"type":"ai4artsed_image_analysis","pos":[1004.05322265625,-692.49365234375],"size":[400,298],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":66},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"system_prompt","name":"system_prompt","shape":7,"type":"STRING","widget":{"name":"system_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","shape":7,"type":"STRING","widget":{"name":"api_key"},"link":69},{"localized_name":"debug","name":"debug","shape":7,"type":"COMBO","widget":{"name":"debug"},"link":null},{"localized_name":"unload_model","name":"unload_model","shape":7,"type":"COMBO","widget":{"name":"unload_model"},"link":null}],"outputs":[{"localized_name":"output_str","name":"output_str","type":"STRING","links":[68]},{"localized_name":"output_float","name":"output_float","type":"FLOAT","links":null},{"localized_name":"output_int","name":"output_int","type":"INT","links":null},{"localized_name":"output_binary","name":"output_binary","type":"BOOLEAN","links":null}],"properties":{"Node name for S&R":"ai4artsed_image_analysis"},"widgets_values":["Art expert, art historian","local/llava:13b","Describe the image using the Panofsky analysis method. Also regard atmospheric, affective, and sonic properties.\n\nNO META-REMARKS! DO NOT MENTION THE METHOD. JUST DELIVER A DESCRIPTIVE ANALYSIS AND ICONOGRAPHIC INTERPRETATION.","","disable","no"]}],"links":[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[4,6,0,3,1,"CONDITIONING"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"],[51,11,0,34,3,"STRING"],[53,34,0,33,0,"*"],[56,37,0,26,0,"STRING"],[59,43,0,42,0,"AUDIO"],[64,46,0,6,0,"CLIP"],[65,46,0,7,0,"CLIP"],[66,8,0,47,0,"IMAGE"],[68,47,0,48,0,"*"],[69,49,0,47,4,"STRING"],[72,44,0,43,0,"STRING"],[73,44,0,45,0,"*"],[74,26,0,6,1,"STRING"],[75,26,0,44,0,"STRING"]],"groups":[{"id":2,"title":"ai4artsed standard prompt input and translation","bounding":[-1498.910400390625,-845.0213623046875,856.890869140625,994.489501953125],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"ai4artsed output sd3.5","bounding":[-538.9072265625,-738.1204223632812,1459.6298828125,782.7643432617188],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Make some noise!","bounding":[1503.5704345703125,-859.71435546875,1454.6103515625,1023.1163330078125],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"Image Analysis","bounding":[980.5768432617188,-849.3404541015625,455.4066162109375,997.9866333007812],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1,"offset":[61.910355745301004,967.5008585109807]}},"version":0.4}