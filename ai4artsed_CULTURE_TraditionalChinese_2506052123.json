{"id":"7530a788-ef61-466e-b7e6-154e4c2fd1bd","revision":0,"last_node_id":47,"last_link_id":51,"nodes":[{"id":20,"type":"CLIPLoader","pos":[3711.84375,547.2083740234375],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.36","Node name for S&R":"CLIPLoader"},"widgets_values":["clip_g.safetensors","stable_diffusion","default"]},{"id":3,"type":"KSampler","pos":[865.199951171875,99.65001678466797],"size":[315,262],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":1},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":4},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.28","Node name for S&R":"KSampler"},"widgets_values":[536995776058005,"randomize",20,7,"euler","normal",1]},{"id":5,"type":"EmptyLatentImage","pos":[882.7503051757812,420.8999328613281],"size":[315,106],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.28","Node name for S&R":"EmptyLatentImage"},"widgets_values":[1024,1024,1]},{"id":8,"type":"VAEDecode","pos":[1221.6497802734375,108.79999542236328],"size":[210,46],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.28","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":9,"type":"SaveImage","pos":[1224.9501953125,228.0499267578125],"size":[210,270],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":9},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.28"},"widgets_values":["ComfyUI"]},{"id":7,"type":"CLIPTextEncode","pos":[416.2669372558594,486.7677917480469],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":40},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[6]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.28","Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":4,"type":"CheckpointLoaderSimple","pos":[401.6502380371094,-153.00001525878906],"size":[315,98],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[1]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[39,40]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.28","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd3.5_large_fp8_scaled.safetensors"]},{"id":11,"type":"ai4artsed_openrouter_key","pos":[-1150.272216796875,1178.423095703125],"size":[441,26],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[37,38,44]}],"properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"e511931edb551d65374c44689e76c08794ed31e7","Node name for S&R":"ai4artsed_openrouter_key"},"widgets_values":[],"color":"#322","bgcolor":"#533"},{"id":6,"type":"CLIPTextEncode","pos":[419.9537048339844,197.88583374023438],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":39},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":43}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[4]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.28","Node name for S&R":"CLIPTextEncode"},"widgets_values":["A banner showing DEFAULT PROMPT, EINGABE FEHLGESCHLAGEN"]},{"id":33,"type":"PrimitiveStringMultiline","pos":[-1099.162109375,-76.674560546875],"size":[581,677.5],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[45]}],"title":"Context","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Traditional Confucian Literati Painting Visual Grammar and Ethical Translation Guidelines\n\n(Based on the orthodox systems of Song, Yuan, Ming, and Qing literati painting, with contemporary adaptation clauses)\n\n\nI. Ontological Transformation Rules\n\n\n    Primacy of Xie He’s \"Six Laws\": Prioritize qiyun shengdong (spirit-resonance and life-movement) as the supreme principle, rejecting Western realism.\n\n    Moral Morphology of Forms:\n        Plants (pine, bamboo, plum, orchid) must adhere to the Mustard Seed Garden Manual conventions—branches rendered in calligraphic lines (bifa technique) embodying \"bone structure brushwork.\"\n        Human figures must be smaller than landscape elements, with drapery referencing Wu Daozi’s \"wind-blown ribbons\" tradition (Wu Dai Dang Feng). Facial features are suggested symbolically with minimalist strokes (\"yi dao bi bu dao\"—the idea transcends the brush).\n\n\n\nII. Spatial Recomposition Principles\n\n\n    Triaxial Perspective System: Apply Guo Xi’s Three Distances (San Yuan):\n        High Distance (Gao Yuan): For moral authority (e.g., cliff-top academies).\n        Deep Distance (Shen Yuan): Depicts Confucian order (e.g., terraced farmlands in stratified perspective).\n        Level Distance (Ping Yuan): Conveys Taoist reclusion (Mi Fu’s mist-and-cloud technique).\n\n\n\nIII. Ink-Brush Ethical System\n\n\n    Materials as Ethical Statements:\n        Raw xuan paper paired with dry-texture cun strokes (\"cun\" texture strokes) metaphorizes \"the arduous path of benevolent rule.\"\n        Colored silk works must use mineral pigments regulated by the Rites of Zhou’s Five Colors doctrine (symbolic hierarchy: blue, red, yellow, white, black).\n\n    Stroke Ethics and Social Hierarchy:\n        Scholars use hemp-fiber strokes (pima cun) for cultivated ease.\n        Fishermen/hermits employ axe-cut strokes (fupi cun) to signify unyielding integrity.\n\n\n\nIV. Semiotic Codex\n\n\n    Inscriptions: Must be original poetry/prose meeting:\n        Content: ≥30% quotations from Analects or allusions from Selections of Refined Literature.\n        Calligraphy: Running/grass script adapted compositionally, but imperial examination (guange) style is banned.\n\n    Seal Protocol:\n        Introductory Seals (Yinshou Zhang): Vermillion-style, modeled on Qin-Han imperial seals.\n        Corner Seals (Yajiao Zhang): White-character seals emulating Han official seal-carving.\n\n\n\nV. Anomaly Accommodation Clause\n\n(For post-Ming unconventional literati works, e.g., Bada Shanren)\n\n\n    Permission for \"distorted forms\", provided:\n        Deformations intertextually align with inscriptions (e.g., fish/birds with side-eyes mirroring protest poetry).\n        Negative space (liubai) must occupy >40% to preserve Daoist \"emptiness contains turbulence\" tension.\n\n\n\nVI. Digital Age Adaptations\n\n\n    AI-Generated Works Must:\n        Simulate Dong Yuan’s \"fangtou cun\" randomness in brushwork algorithms.\n        Follow Record of Artisans’ chromatic sequence (\"blue adjacent to white\") in RGB channels.\n\n    Prohibitions:\n        No 3D volumetric rendering; preserve the two-dimensional \"unity of calligraphy and painting\" (shuhua tongyuan).\n        Photoshop filters banned; ink gradations must emerge from iterative algorithms.\n\n\n\nVII. Final Validation Standards\n\nTranslated works must pass:\n\n\n    \"Qi-Appraisal\" Test: Art historians must identify period style from three meters away.\n\n    \"Painting-Reading\" Test: Calligraphers must reverse-engineer composition logic from inscriptions.\n\n\n(Note: Default technical manual: Ming-era Ten Bamboo Studio Manual; philosophical basis: Qing Principles of Painting.)\n\n\nThis translation:\n\n\n    Preserves all original Confucian philosophical rigor.\n\n    Introduces executable metrics (e.g., 30% Analects quota, 40% liubai).\n\n    Accommodates historical exceptions while maintaining orthodoxy.\n\n    Bridges classical ethics to AI-generated art constraints.\n\n"],"color":"#232","bgcolor":"#353"},{"id":30,"type":"ai4artsed_openrouter","pos":[-1021.5064697265625,-426.2983703613281],"size":[491.4000244140625,268],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","link":32},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":null},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":37},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"output","name":"output","type":"STRING","links":[36,48]}],"properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"fe64c5c981a6053532151e879437df25061dd945","Node name for S&R":"ai4artsed_openrouter"},"widgets_values":["NULL=neutral","Translate the prompt into English with maximal semantic preservation. \nMaintain the original structure, and preserve all culturally specific terms or non-translatable phrases in their original form. \nDo not translate proper names, ritual terms, or material names unless they have a common English usage. \nMark such terms with double brackets, e.g. [[egungun]], and preserve their position. \nDo not paraphrase, interpret, or summarize. Do not add any comments or explanations.\nReturn only the translated prompt as plain text.","","deepseek/deepseek-chat-v3-0324","enable"],"color":"#322","bgcolor":"#533"},{"id":34,"type":"PrimitiveStringMultiline","pos":[-455.8758544921875,-64.6671371459961],"size":[745.3324584960938,340.8220520019531],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[46]}],"title":"Stylization Instruction (usually leave as is)","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Proceed strictly as follows: \nRegard, honor and enhance the cultural meanings and connotations according to the respective cultural values connected to a language. Reflect on the meaning of the respective concepts. Rethink the image. Avoid western and global north biases and western gaze where not fitting. Do not talk about the prompt, this is forbidden, but create a prompt text.\n\nTranslate a given image, repective image description, from its original visual and semantic system into a target representational system, while preserving the structural identity of all entities, gestures, and relations. \n\nFor each element, identify its function, affective tone, and relational role within the source composition. Reconstruct the scene using the formal, material, and compositional logics of the target system—whether symbolic, expressive, disruptive, or codified. All elements must remain semantically traceable, yet visually and contextually transformed in accordance with the target system’s internal conventions of form, space, and signification.\n\nCreate a detailed prompt that stays utterly true to the text and cultural context of the input you received. Be radical, do not soften or harmonize contraditive elements. "],"color":"#322","bgcolor":"#533"},{"id":35,"type":"PrimitiveStringMultiline","pos":[-416.9264221191406,657.5286865234375],"size":[746.7477416992188,370.5432434082031],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[47]}],"title":"Prompt Construction Instruction (SD 3.5)","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Use the input to create a prompt suitable for Stable Diffusion 3.5.\nInstructions:\n1. Select only information that can be rendered visually: entities, their visual properties, spatial configurations, symbolic or narrative roles if they have visual consequences (e.g. pose, gesture, setting, costume).\n2. Ignore non-visual symbolic or abstract relations unless they manifest as visible differences (e.g. \"freedom\" → \"confinement\" becomes \"open field\" → \"prison room\").\n3. Condense the result into a comma-separated prompt with no more than 75 tokens. Use compressed, stylized language typical for SD prompts.\n4. Do not use full sentences. Avoid repetition. Do not include any meta-text or explanation.\n5. Emphasize key compositional and stylistic features if evident (e.g. centered, dramatic lighting, overcast, wide angle, cinematic).\nOutput: Only the resulting prompt as plain text. No table, no explanation, no formatting.\n\nIf the resulting prompt is clearly under 75 tokens, expand it by:\n– adding visually descriptive adjectives (e.g. lighting, texture, motion, color quality)\n– specifying environmental or background elements that imply the mood\n– including camera or compositional hints (e.g. angle, framing, focus)\n– inserting emotional or symbolic indicators only if they have visual impact\n\nDo not pad artificially or repeat. Prioritize meaningful, image-relevant details."]},{"id":46,"type":"PreviewAny","pos":[414.3954162597656,739.5924682617188],"size":[762.2424926757812,371.7481994628906],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":49}],"outputs":[],"title":"final prompt","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":45,"type":"PreviewAny","pos":[-466.4021301269531,-925.1650390625],"size":[762.2424926757812,371.7481994628906],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":48}],"outputs":[],"title":"translated input","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":15,"type":"ai4artsed_openrouter","pos":[-457.1026916503906,-357.3642578125],"size":[759.31298828125,238.5779266357422],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","link":36},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":45},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":46},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":38},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"output","name":"output","type":"STRING","links":[42,50]}],"title":"ai4artsed_prompt_interception","properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"fe64c5c981a6053532151e879437df25061dd945","Node name for S&R":"ai4artsed_openrouter"},"widgets_values":["","","","deepseek/deepseek-chat-v3-0324","enable"],"color":"#322","bgcolor":"#533"},{"id":47,"type":"PreviewAny","pos":[494.255859375,-876.24267578125],"size":[762.2424926757812,371.7481994628906],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":50}],"outputs":[],"title":"cultural translation","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":26,"type":"PrimitiveString","pos":[-1380.2117919921875,-667.4435424804688],"size":[782.6649780273438,100.95500183105469],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[32]}],"title":"ai4artsed_text_prompt","properties":{"cnr_id":"comfy-core","ver":"0.3.36","Node name for S&R":"PrimitiveString"},"widgets_values":["Ein Banner mit der Aufschrift DEFAULT-PROMPT vor majestätischer Landschaft"],"color":"#232","bgcolor":"#353"},{"id":31,"type":"ai4artsed_openrouter","pos":[-438.8248596191406,339.3811950683594],"size":[707.461181640625,214],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"input_prompt","name":"input_prompt","type":"STRING","link":42},{"localized_name":"input_context","name":"input_context","type":"STRING","widget":{"name":"input_context"},"link":null},{"localized_name":"style_prompt","name":"style_prompt","type":"STRING","widget":{"name":"style_prompt"},"link":47},{"localized_name":"api_key","name":"api_key","type":"STRING","widget":{"name":"api_key"},"link":44},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"debug","name":"debug","type":"COMBO","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"output","name":"output","type":"STRING","links":[43,49]}],"title":"Resulting Prompt","properties":{"aux_id":"joeriben/ai4artsed_comfyui","ver":"fe64c5c981a6053532151e879437df25061dd945","Node name for S&R":"ai4artsed_openrouter"},"widgets_values":["the final prompt should have maximum 75 token","","","deepseek/deepseek-chat-v3-0324","enable"],"color":"#322","bgcolor":"#533"}],"links":[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[4,6,0,3,1,"CONDITIONING"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"],[32,26,0,30,0,"STRING"],[36,30,0,15,0,"STRING"],[37,11,0,30,3,"STRING"],[38,11,0,15,3,"STRING"],[39,4,1,6,0,"CLIP"],[40,4,1,7,0,"CLIP"],[42,15,0,31,0,"STRING"],[43,31,0,6,1,"STRING"],[44,11,0,31,3,"STRING"],[45,33,0,15,1,"STRING"],[46,34,0,15,2,"STRING"],[47,35,0,31,2,"STRING"],[48,30,0,45,0,"*"],[49,31,0,46,0,"*"],[50,15,0,47,0,"*"]],"groups":[],"config":{},"extra":{"ds":{"scale":1.4641000000000006,"offset":[207.42242646884733,-717.4896356680862]}},"version":0.4}